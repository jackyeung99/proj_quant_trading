storage:
  backend: local
  base_dir: "."

ingestion:
  enabled: True
  mode: append  # full or append
  lookback_days: 1
  start_override: "2021-01-01"
  end_override: "2026-01-01"

sources:

  equities_daily:
    enabled: False
    provider: yfinance
    symbols: ["XLE", "SPY"]
    interval: "1d"

  equities_intraday_15m:
    enabled: False
    provider: alpaca
    symbols: ["XLE", "SPY"]
    interval: "15Min"
    feed: "iex"
    adjustment: "all"

  equities_intraday_5m:
    enabled: False
    provider: alpaca
    symbols: ["XLE",]
    interval: "5Min"
    feed: "iex"
    adjustment: "all"

  macro_fred:
    enabled: True
    provider: fred
    symbols: [ "TB3MS" , "DTB4WK"]
        # "VIXCLS", "DGS10", "DGS2"]
    interval: "1d"


silver: 
  enabled: True 


gold:
  enabled: False
  
  tag: 'trade-next-day'
  assets: ['XLE']
  input_freq: "15Min"        
  agg_freq: "1D"           # business day buckets

  # aggregation / market conventions
  market_tz: "America/New_York"
  cutoff_hour: 16.0

  intra_features:
    - name: rv
      kind: rv
      requires: ["close"]
      params: { close_col: "close" }

    - name: rvol
      kind: rvol
      requires: ["close"]

    # jump / robust jump-related intraday features
    - name: bv
      kind: bv
      requires: ["close"]

    - name: jump_var
      kind: jump_var
      requires: ["close"]


  # --- transforms on the daily table after aggregation ---
  daily_transforms:
    # returns
    - name: returns
      kind: log
      col: close
      out: ret_cc

    - name: returns
      kind: log
      col: open
      out: ret_oo

    - name: ewma_forecast
      ret_col: ret_cc
      out_col: ewma_sigma_ann_next
      annualize: true
      
      lam: 0.94

    - name: garch_forecast
      ret_col: ret_cc
      out_col: garch_sigma_ann_next
      annualize: true

      p: 1
      q: 1



    # rolling volatility on close-close returns
    - name: rolling_std
      col: ret_cc
      windows: [20, 60]
      prefix: vol_
      annualize: true
      periods_per_year: 252.0


    # momentum
    - name: momentum
      col: close
      windows: [5, 20, 60]
      prefix: mom_

    # trend slope (rolling regression slope on log price)
    - name: trend_slope
      col: close
      window: 60
      out: trend_slope_60
      use_log: true


    # range-based volatility (requires high/low)
    - name: parkinson_vol
      high_col: high
      low_col: low
      out: pk_vol

    # rolling sharpe on ret_cc
    - name: rolling_sharpe
      ret_col: ret_cc
      windows: [63]
      prefix: sharpe_
      annualize: true
      periods_per_year: 252.0